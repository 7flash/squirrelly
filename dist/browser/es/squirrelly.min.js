function e(r){var t,n,i=new Error(r);return t=i,n=e.prototype,Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n,i}function r(r,t,n){var i=t.slice(0,n).split(/\n/),f=i.length,o=i[f-1].length+1;throw e(r+=" at line "+f+" col "+o+":\n\n  "+t.split(/\n/)[f-1]+"\n  "+Array(o).join(" ")+"^")}function t(e,t,n){var i=new RegExp("([|()]|=>)|'(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r'\\\\])*?'|`(?:\\\\[\\s\\w\"'\\\\`]|[^\\\\`])*?`|\"(?:\\\\[\\s\\w\"'\\\\`]|[^\\n\\r\"\\\\])*?\"|\\/\\*[^]*?\\*\\/|((\\/)?(-|_)?"+n+")","g"),f=new RegExp("([^]*?)"+t+"(-|_)?\\s*","g"),o=0,a="";function c(){var t,n={f:[],d:[]},c=0,u=0,l=e[o],s="c",p="r";function h(t,i){var f=e.slice(o,t)+(i||""),a=f.trim();if("f"===s)n.f[u-1][0]+=a;else if("fp"===s)n.f[u-1][1]+=a;else if("err"===s){if(a){var c=f.search(/\S/);r("invalid syntax",e,o+c)}}else s&&(n[s]=a);o=t+1}for(o+=1,"~"===l||"#"===l||"/"===l?(s="n",p=l):"!"===l||"?"===l?p=l:o-=1;null!==(t=i.exec(e));){var g=t[1],v=t[2],d=t[3],x=t[4],y=t.index;if(g)"("===g?(0===c&&("n"===s?(h(y),s="p"):"f"===s&&(h(y),s="fp")),c++):")"===g?0===--c&&"c"!==s&&(h(y),s="err"):0===c&&"|"===g?(h(y),s="f",u++,n.f[u-1]=["",""]):"=>"===g&&(h(y),o+=1,s="res");else if(v)return h(y),o+=v.length-1,f.lastIndex=o,a=x,d&&"~"===p&&(p="s"),n.t=p,n}return r("unclosed tag",e,e.length),n}return function t(n,i){n.b=[];var u,l=!1,s=[];function p(e,r){if(e){var t=e.replace(/\\/g,"\\\\").replace(/'/g,"\\'");r&&(t=function(e,r){return"_"===r?String.prototype.trimRight?e.trimRight():e.replace(/[\s\uFEFF\xA0]+$/,""):e.replace(/(?:[\s\uFEFF\xA0]|\r\n)$/,"")}(t,r)),a&&(t=function(e,r){return"_"===r?String.prototype.trimLeft?e.trimLeft():e.replace(/^[\s\uFEFF\xA0]+/,""):e.replace(/^(?:[\s\uFEFF\xA0]|\r\n)/,"")}(t,a),a=""),s.push(t)}}for(;null!==(u=f.exec(e));){p(u[1],u[2]),o=u.index+u[0].length;var h=c(),g=h.t;if("~"===g)h=t(h),s.push(h);else if("/"===g){if(n.n===h.n)return l?(l.d=s,n.b.push(l)):n.d=s,n;r("Helper start and end don't match",e,u.index+u[0].length)}else"#"===g?(l?(l.d=s,n.b.push(l)):n.d=s,l=h,s=[]):s.push(h)}return i&&(p(e.slice(o,e.length)),n.d=s),n}({f:[],d:[]},!0).d}e.prototype=Object.create(Error.prototype,{name:{value:"Squirrelly Error",enumerable:!1}});var n=function(){function e(e){this.cache=e}return e.prototype.define=function(e,r){this.cache[e]=r},e.prototype.get=function(e){return this.cache[e]},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.clear=function(){this.cache={}},e.prototype.load=function(e){this.cache=e},e}(),i=new n({}),f=new n({}),o=new n({each:function(e){for(var r="",t=e.params[0],n=0;n<t.length;n++)r+=e.exec(t[n],n);return r},foreach:function(e){var r="",t=e.params[0];for(var n in t)t.hasOwnProperty(n)&&(r+=e.exec(t,n));return r}}),a=new n({if:function(r){if(r.f&&r.f.length)throw e("native helper 'if' can't have filters");var t="if("+r.p+"){"+h(r.d)+"}";if(r.b)for(var n=0;n<r.b.length;n++){var i=r.b[n];"else"===i.n?t+="else{"+h(i.d)+"}":"elif"===i.n&&(t+="else if("+i.p+"){"+h(i.d)+"}")}return t}}),c=new n({});function u(e,r,n){return"var tR='';"+h(t(e,r,n)).replace(/\n/g,"\\n").replace(/\r/g,"\\r")+"return tR"}function l(e,r,t,n){var i="{exec:"+p(r,e)+",params:["+t+"]";return n&&(i+=",name:'"+n+"'"),i+="}"}function s(e){for(var r="[",t=0;t<e.length;t++){var n=e[t];r+=l(n.res||"",n.d||[],n.p||"",n.n||""),t<e.length&&(r+=",")}return r+="]"}function p(e,r){return"function("+r+"){var tR='';"+h(e)+"return tR}"}function h(e){for(var r=0,t=e.length,n="";r<t;r++){var i=e[r];if("string"==typeof i){n+="tR+='"+i+"';"}else{var f=i.t,o=i.c||"",c=i.f||[],u=i.n||"",p=i.p||"",h=i.res||"",v=i.b||[];if("r"===f)n+="tR+="+g(o,c)+";";else if("~"===f)if(a.get(u))n+=a.get(u)(i);else{var d="Sqrl.H.get('"+u+"')("+l(h,i.d,p);v&&(d+=","+s(v)),n+="tR+="+(d=g(d+=")",c))+";"}else"s"===f?n+="tR+="+g("Sqrl.H.get('"+u+"')("+p+")",c)+";":"!"===f&&(n+=o+";")}}return n}function g(e,r){for(var t=0;t<r.length;t++){var n=r[t][0],i=r[t][1];e="Sqrl.F.get('"+n+"')("+e,i&&(e+=","+i),e+=")"}return e}function v(e,r,t){return new Function("it","Sqrl",u(e,r,t))}function d(e,r){return v(e,"{{","}}")(r,{H:o,F:c})}function x(e,r){}export{v as Compile,u as CompileToString,x as Config,c as F,o as H,i as L,a as NH,f as P,t as Parse,h as ParseScope,p as ParseScopeIntoFunction,d as Render};
//# sourceMappingURL=squirrelly.min.js.map
