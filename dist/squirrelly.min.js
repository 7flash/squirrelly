!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).Sqrl={})}(this,function(e){"use strict";var r=Object.freeze({get H(){return n},get Compile(){return k},get defineFilter(){return q},get defineHelper(){return O},get defineNativeHelper(){return b},get definePartial(){return I},get Render(){return H},get renderFile(){return N},get load(){return C},get __express(){return _},get F(){return R},get setDefaultFilters(){return y},get autoEscaping(){return $},get defaultTags(){return u}}),n={},t=/{{ *?(?:(?:(?:(?:([\w$]+ *?(?:[^\s\w($][^\n]*?)*?))|(?:@(?:([\w$]+:|(?:\.\.\/)+))? *(.+?) *))(?: *?(\| *?[\w$]+? *?)+?)?)|(?:([\w$]+) *?\(([^\n]*?)\) *?([\w$]*))|(?:\/ *?([\w$]+))|(?:# *?([\w$]+))|(?:([\w$]+) *?\(([^\n]*?)\) *?\/)|(?:!--[^]+?--)) *?}}\n?/g,i={s:"{{",e:"}}"},l=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,a=t,s=i;function u(e){o(e[0],e[1]),t=a,i=s}function o(e,r){var n=e+a.source.slice(s.s.length,0-(s.e.length+3))+r+"\\n?",t=a.lastIndex;s={s:e,e:r},(a=RegExp(n,"g")).lastIndex=t}function f(e){return e=e.replace(l,function(e,r,n){return void 0===n?e:(void 0===r&&(r=""),"hvals"+r+"."+n)})}var c={if:{helperStart:function(e){return"if("+e+"){"},helperEnd:function(){return"}"},blocks:{else:function(){return"}else{"}}},each:{helperStart:function(e,r){return"for(var i=0;i<"+e+".length; i++){tR+=(function(hvals){var tR='';var hvals"+r+"=hvals;"},helperEnd:function(e){return"return tR})({this:"+e+"[i],index:i})};"}},foreach:{helperStart:function(e,r){return"for(var key in "+e+"){if(!"+e+".hasOwnProperty(key)) continue;tR+=(function(hvals){var tR='';var hvals"+r+"=hvals;"},helperEnd:function(e){return"return tR})({this:"+e+"[key], key: key})};"}},log:{selfClosing:function(e){return"console.log("+e+");"}},tags:{selfClosing:function(e){return o(e.slice(0,e.indexOf(",")).trim(),e.slice(e.indexOf(",")+1).trim()),""}},js:{selfClosing:function(e){return e+";"}}};RUNTIME&&(c={});var v=c,d={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"};function g(e){return d[e]}var p=/[&<"']/g,h=/[&<"']/,R={e:function(e){var r=String(e);return h.test(r)?r.replace(p,g):r}},x={},w={start:"",end:""};function y(e){if("clear"===e)x={};else for(var r in e)e.hasOwnProperty(r)&&(x[r]=e[r]);!function(){for(var e in w={start:"",end:""},x)x.hasOwnProperty(e)&&x[e]&&(w.start+="Sqrl.F."+e+"(",w.end+=")")}()}var m=!0;function $(e){return m=e}function F(e,r){var n,t=!1,i="",l="";if(r&&""!==r){n=r.split("|");for(var a=0;a<n.length;a++)n[a]=n[a].trim(),""!==n[a]&&("safe"!==n[a]?(i="Sqrl.F."+n[a]+"("+i,l+=")"):t=!0)}return i+=w.start,l+=w.end,!t&&m&&(i+="Sqrl.F.e(",l+=")"),i+e+l}var S={};function E(e){var r,n=0,l="",u=[],o=-1,c=0,d={};for(s=i,(a=t).lastIndex=0;null!==(r=a.exec(e));){if(""===l?l+="var tR='"+e.slice(n,r.index).replace(/'/g,"\\'")+"';":n!==r.index&&(l+="tR+='"+e.slice(n,r.index).replace(/'/g,"\\'")+"';"),n=r[0].length+r.index,r[1])l+="tR+="+q(r[1],r[4])+";";else if(r[3])l+="tR+="+O(r[3],r[2],r[4])+";";else if(r[5]){var g=r[7];""!==g&&null!==g||(g=c,c++);var p=v.hasOwnProperty(r[5]);o+=1;var h=r[6]||"";h=f(h),p||(h="["+h+"]");var R={name:r[5],id:g,params:h,native:p};u[o]=R,p?(l+=v[r[5]].helperStart(h,g),n=a.lastIndex):l+="tR+=Sqrl.H."+r[5]+"("+h+",function(hvals){var hvals"+g+"=hvals;var tR='';"}else if(r[8]){var x=u[o];x&&x.name===r[8]?(o-=1,!0===x.native?l+=v[x.name].helperEnd(x.params,x.id):d[x.id]?l+="return tR}});":l+="return tR});"):console.error("Helper beginning & end don't match.")}else if(r[9]){var w=u[o];if(w.native){var y=v[w.name];y.blocks&&y.blocks[r[9]]?(l+=y.blocks[r[9]](w.id),n=a.lastIndex):console.warn("Native helper '%s' doesn't accept that block.",w.name)}else d[w.id]?l+="return tR},"+r[9]+":function(hvals){var hvals"+w.id+"=hvals;var tR='';":(l+="return tR},{"+r[9]+":function(hvals){var hvals"+w.id+"=hvals;var tR='';",d[w.id]=!0)}else if(r[10]){var m=r[11]||"";if(m=f(m),"include"===r[10]){var $=e.slice(0,r.index),E=e.slice(r.index+r[0].length),k=m.replace(/'|"/g,"");e=$+S[k]+E,n=a.lastIndex=r.index}else v.hasOwnProperty(r[10])&&v[r[10]].hasOwnProperty("selfClosing")?(l+=v[r[10]].selfClosing(m),n=a.lastIndex):l+="tR+=Sqrl.H."+r[10]+"("+m+");"}function q(e,r){return F("options."+e,r)}function O(e,r,n){return F(void 0!==r?"hvals"+(/(?:\.\.\/)+/g.test(r)?u[o-r.length/3-1].id:r.slice(0,-1))+"."+e:"hvals."+e,n)}}return""===l?l+="var tR='"+e.slice(n,e.length).replace(/'/g,"\\'")+"';":n!==e.length&&(l+="tR+='"+e.slice(n,e.length).replace(/'/g,"\\'")+"';"),l+="return tR",new Function("options","Sqrl",l.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))}RUNTIME&&(E={});var k=E;function q(e,r){R[e]=r}function O(e,r){n[e]=r}function b(e,r){v[e]=r}function H(e,n){return"function"==typeof e?e(n,r):"string"==typeof e?C(n,e)(n,r):void 0}function I(e,r){S[e]=r}var P={};function C(e,r){var n=e.$file,t=e.$name,i=e.$cache;if(!1===i){if(n){var l=require("fs");return k(l.readFileSync(n,"utf8"))}if(r)return k(r);throw Error("No template")}if(n){if(P[n])return P[n];var a=require("fs").readFileSync(n,"utf8");return P[n]=k(a),P[n]}return t?P[t]?P[t]:r?(P[t]=k(r),P[t]):void 0:r?!0===i?P[r]?P[r]:(P[r]=k(r),P[r]):k(r):"Error"}function N(e,n){return n.$file=e,C(n)(n,r)}function _(e,r,n){return n(null,N(e,r))}e.Compile=k,e.F=R,e.H=n,e.Render=H,e.__express=_,e.autoEscaping=$,e.defaultTags=u,e.defineFilter=q,e.defineHelper=O,e.defineNativeHelper=b,e.definePartial=I,e.load=C,e.renderFile=N,e.setDefaultFilters=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=squirrelly.min.js.map
